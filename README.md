# idleKV - 基于可扩展基数树的键值内存数据库

一个面向现代多核架构的高性能内存数据库系统，采用Adaptive Radix Tree (ART)索引结构，支持MVCC并发控制和GPU查询加速。

## 项目概述

idleKV是一个研究型内存数据库项目，旨在解决传统内存数据库在多核环境下的性能瓶颈。通过创新的索引结构和并发控制机制，为现代硬件环境提供极致的查询性能。

### 核心特性

- **ART索引结构**: 基于可扩展基数树，支持O(k)复杂度查询
- **高并发支持**: MVCC + OCC + ROWEX协议，读写不互相阻塞  
- **完整持久化**: WAL + Snapshot机制，保证数据安全
- **GPU加速**: 探索批量查询的GPU并行优化
- **SIMD优化**: 利用现代CPU指令集加速索引查找

## 技术架构

### 分层设计
```
┌─────────────────┐
│   接口层        │  Redis协议兼容
├─────────────────┤
│   执行层        │  CPU-GPU调度器
├─────────────────┤
│   索引层        │  ART双端实现
├─────────────────┤
│  内存管理层     │  EBR内存回收
├─────────────────┤
│  持久化层       │  WAL + Snapshot
└─────────────────┘
```

### 核心技术

| 组件 | 技术方案 | 特点 |
|------|----------|------|
| **索引结构** | Adaptive Radix Tree | 缓存友好、支持范围查询 |
| **并发控制** | MVCC + OCC | 无锁读取、乐观写入 |
| **内存管理** | Epoch-Based Reclamation | 安全的版本回收 |
| **持久化** | WAL + Fork Snapshot | 崩溃一致性保证 |
| **硬件加速** | CUDA批量查询 | GPU并行优化 |

## 技术栈

- **编程语言**: C++20
- **GPU编程**: NVIDIA CUDA
- **构建系统**: CMake 3.11+
- **运行环境**: Linux
- **协议支持**: Redis兼容协议

## 性能目标

| 指标 | 目标值 | 说明 |
|------|--------|------|
| **点查询延迟** | < 1μs | 单线程查询延迟 |
| **吞吐量** | > 1M QPS | 多线程并发查询 |
| **内存效率** | < 20% 开销 | 相比原始数据大小 |
| **GPU加速** | 2-5x 提升 | 批量查询场景 |

## 开发进度

- [x] 📋 需求分析与架构设计 (2025.11-12)
- [ ] 🔧 内存管理与EBR机制 (2025.12-2026.01)
- [ ] 🌲 ART索引结构实现 (2026.01-02)
- [ ] 🚀 GPU查询加速优化 (2026.02-03)
- [ ] 💾 WAL与崩溃恢复 (2026.03-04)
- [ ] 📊 性能测试与调优 (2026.04-05)

## 相关论文

- Leis et al. "The Adaptive Radix Tree: ARTful Indexing for Main-Memory Databases" (ICDE 2013)
- Neumann et al. "ROWEX: Read-Optimized Write-Exclusive Synchronization" (DaMoN 2014)
- Karnagel et al. "The Case for Heterogeneous HTAP" (CIDR 2017)
